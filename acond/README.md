# ACON Daemon

Introduction
------------
ACON Daemon is responsible for:
- Act as init for the TD guest Linux kernel
- Manage objects
- Manage instances (running instances of a Bundle)
- Facilitate inter-container communication
- Measurement and Attestation
- Multiplexing terminals

Build and Install ACON Daemon
---------------------------
### Prerequisites:
- Fedora Linux 36:
  ```bash
    $ sudo yum install glibc-devel musl-gcc protobuf-compiler make git
  ```
- Ubuntu 22.04 LTS:
  ```bash
    $ sudo apt install build-essential musl-dev protobuf-compiler make git
  ```
  **Note**: these packages can be installed with different package management commands in different Linux distros.
- Follow the instructions in ["Install Rust"](https://www.rust-lang.org/tools/install) to install rust. Basically, just run the following command for Linux distros.
  ```bash
    $ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
  ```

### Build ACON Daemon
- To build ACON Daemon with default features in release version, enter the following command:
  ```bash
    $ make build CARGO_FLAGS="--release"
  ```
- To build ACON Daemon with full features in release version, enter the following command:
  ```bash
    $ make build CARGO_FLAGS="--release --features='full'"
  ```
- To build ACON Daemon with default features in debug version, enter the following command:
  ```bash
    $ make build
  ```
- To build ACON Daemon with full features in debug version, enter the following command:
  ```bash
    $ make build CARGO_FLAGS="--features='full'"
  ```
- To clean the files generated by the previous commands, enter the following command:
  ```bash
    $ make clean
  ```
- To clean all the files generated by the previous commands including OpenSSL, enter the following command:
  ```bash
    $ make distclean
  ```
  **Note**: it will take more time to rebuild acond which depends on OpenSSL.

### Install ACON Daemon
- ACON Daemon always acts as the init process for the TD guest, so just run the following command to make it as init of the initial ramdisk:

  ```bash
    $ make install CARGO_FLAGS="--release" ACOND_DEST=<INITRD_PATH>/init
  ```
  **Note**: INITRD_PATH should be an absolute path.
